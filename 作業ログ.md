### lamba

```
terraform fmt
terraform plan
terraform apply -auto-approve
```

```
chmod +x lambda_deploy.sh
shellcheck lambda_deploy.sh
./lambda_deploy.sh


```

### Amazon RDS
```bash
# 必要に応じて apt や brew で direnv を入れる
direnv allow .
docker run -it --rm alpine/psql:17.4 \
  -h "$(terraform output -raw rds_endpoint)" \
  -U "${TF_VAR_rds_username}" \
  -d postgres

# パスワードを聞かれるのでターミナルからタイプする
```
以下の sql 文を検証のため実行

```sql
-- テスト用のテーブルを作成
CREATE TABLE test_users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 作成したテーブルにデータを2件挿入
INSERT INTO test_users (name) VALUES ('Hoge Huga'), ('Piyo Hogera');

-- データを表示
SELECT * FROM test_users;

-- 削除
DELETE FROM test_users WHERE id = 1;

-- 削除を確認
SELECT * FROM test_users;

-- テーブルも削除
DROP TABLE test_users;

-- 削除を確認、こっちはエラーになる
SELECT * FROM test_users;
```
